<script>
$(document).ready(function(){
    $('#file-uploader').filer({
        /*
		templates: filer_default_opts.templates,
        uploadFile: filer_default_opts.uploadFile,
		limit: 5,
        */
         templates: {
                box: '<ul class="jFiler-items-list jFiler-items-grid"></ul>',
                item: '<li class="jFiler-item" style="width:24%">\
                            <div class="jFiler-item-container">\
                                <div class="jFiler-item-inner">\
                                    <div class="jFiler-item-thumb">\
                                        <div class="jFiler-item-status"></div>\
                                        <div class="jFiler-item-thumb-overlay">\
    										<div class="jFiler-item-info">\
    											<div style="display:table-cell;vertical-align: middle;">\
    												<span class="jFiler-item-title"><b title="{{fi-name}}">{{fi-name}}</b></span>\
    												<span class="jFiler-item-others">{{fi-size2}}</span>\
    											</div>\
    										</div>\
    									</div>\
                                        {{fi-image}}\
                                    </div>\
                                    <div class="jFiler-item-assets jFiler-row">\
                                        <ul class="list-inline pull-left">\
                                            <li>{{fi-progressBar}}<input type="text" name="file_name[]"  class="form-control" placeholder="Tytuł pliku"> <input type="number" name="file_position[]"  class="form-control" placeholder="Pozycja" ></li>\
                                        </ul>\
                                        <ul class="list-inline pull-right">\
                                            <li><a class="icon-jfi-trash jFiler-item-trash-action"></a></li>\
                                        </ul>\
                                    </div>\
                                </div>\
                            </div>\
                        </li>',
                        
                itemAppend: '<li class="jFiler-item" style="width:24%">\
                                <div class="jFiler-item-container">\
                                    <div class="jFiler-item-inner">\
                                        <div class="jFiler-item-thumb">\
                                            <div class="jFiler-item-status"></div>\
                                            <div class="jFiler-item-thumb-overlay">\
        										<div class="jFiler-item-info">\
        											<div style="display:table-cell;vertical-align: middle;">\
        												<span class="jFiler-item-title"><a href="{{fi-file}}"><b title="{{fi-name}}">{{fi-name}}</b></a></span>\
        												<span class="jFiler-item-others">{{fi-size2}}</span>\
        											</div>\
        										</div>\
        									</div>\
                                            {{fi-image}}\
                                        </div>\
                                        <div class="jFiler-item-assets jFiler-row">\
                                            <ul class="list-inline pull-left">\
                                                <li><input type="text" name="file_name_update[]"  class="form-control" placeholder="Tytuł pliku" value="{{fi-file_title}}"> <input type="number" name="file_position_update[]"  class="form-control" placeholder="Pozycja" value="{{fi-file_position}}" ><input type="hidden" name="id_file_update[]"  value="{{fi-id_image}}"></li>\
                                            </ul>\
                                            <ul class="list-inline pull-right">\
                                                <li> <a class="icon-jfi-trash jFiler-item-trash-action"></a></li>\
                                            </ul>\
                                        </div>\
                                    </div>\
                                </div>\
                            </li>',
                progressBar: '<div class="bar"></div>',
                itemAppendToEnd: false,
                removeConfirmation: true,
                _selectors: {
                    list: '.jFiler-items-list',
                    item: '.jFiler-item',
                    progressBar: '.bar',
                    remove: '.jFiler-item-trash-action'
                }
            },
        /*
		maxSize: 50,
        extensions: ['jpg', 'jpeg', 'png', 'gif','info'],
        */
        addMore: true,
        showThumbs: true,
        captions: {
            button: "Wybierz pliki",
            feedback: "Wybierz pliki do wgrania na serwer",
            feedback2: "wybranych plików",
            drop: "Drop file here to Upload",
            removeConfirmation: "Czy napewno chcesz usunąć ten plik?",
            errors: {
                filesLimit: "Only {{fi-limit}} files are allowed to be uploaded.",
                filesType: "Można wybrać tylko zdjęcia JPG, PNG, GIF lub BMP",
                filesSize: "{{fi-name}} jest za duży! Proszę wybierać pliki mniejsze niż {{fi-fileMaxSize}} MB.",
                filesSizeAll: "Wybrane pliki zajmują zbyt dużo. Prosimy wybrać pliki, które zajmują razem nie więcej niż {{fi-maxSize}} MB.",
                folderUpload: "Nie można wgrywać katalogów."
            }
        }
        <?php 
                               
            if(isset($this->FilesInPage) AND is_array($this->FilesInPage))
            {
        
                print ',files: [';
                
                    foreach ($this->FilesInPage AS $File)
                    {
                        
                        print '
                        {
                        name: "'.$File['file'].'",
                        file_title: "'.$File['name'].'",
                        file_position: '.$File['position'].',
                        id_image: '.$File['id_file'].',
                        size: '.$File['size'].',
                        file: "'.FILES_URL.$File['file'].'"    
                             
                        },
                        ';
                    }
                print ']';       
            }              
        ?>  
    });
});
</script>